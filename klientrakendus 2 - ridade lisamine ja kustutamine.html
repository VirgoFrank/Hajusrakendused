<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>TODO</title>
	<style>
		h1 { color: red; }
		.hidden { display: none; }
	</style>
</head>
<body>
	<h1>TODO</h1>
	
	<button onclick="addTodo()">Lisa uus</button>
	
	<div id="todo-list">
		<div class="row hidden">
			<input type="checkbox" name="markedAsDone">
			<input type="text" name="title">
			<input type="button" value="Delete">
			<input type="button" value="Save">
		</div>
		<textarea type="saved"></textarea>
	</div>
	
	<script>
		function addTodo() {
			let row = document.querySelector("#todo-list > .row.hidden");
			let newRow = row.cloneNode(true);
			newRow.classList.remove("hidden");
			
			let delBtn = newRow.querySelector("input[value=Delete]");
			delBtn.addEventListener("click", deleteRow);
			
			document.querySelector("#todo-list").appendChild(newRow);
			
			let saveBtn = newRow.querySelector("input[value=Save]");
			saveBtn.addEventListener("click",saveRow)
			
			
		}
		function saveRow(event){
			
		}
		
		function deleteRow(event) {
			let row = event.currentTarget.parentElement;
			let container = row.parentElement;
			container.removeChild(row);
		}
		
		window.addEventListener('DOMContentLoaded', () =>  {
			fetch("http://demo2.z-bit.ee/todo.json")
			.then((response) => response.json())
			.then((data) => {
				console.log(data);
			});
		});
	</script>
</body>
</html>